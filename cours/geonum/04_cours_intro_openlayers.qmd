---
title: "OpenLayers â€“ introduction"
format: html
---

## Objectifs de la session

-   Comprendre Ã  quoi sert NodeJS

-   Apprendre Ã  crÃ©er une application OpenLayers avec NodeJS

-   Afficher de la donnÃ©e dans mon application

*DurÃ©eÂ : 1h30 Ã  2h*

## Supports

[CoursÂ : Introduction Ã  OpenLayers](./04_diapos_intro_openlayers.qmd){target="_blank"}

## TP â€“ Mise en place dâ€™une application OpenLayers avec NodeJS

### Quartier libre pour faire une premiÃ¨re carteÂ !

Comme vous avez des bases solides en Leaflet et que OpenLayers nâ€™est pas si diffÃ©rent que Ã§a, je vous propose de commencer par un petit exercice "libre" oÃ¹ vous essayez de vous approcher le plus possible de la consigne suivanteÂ :

CrÃ©ez une carte grÃ¢ce Ã  **OpenLayers** Ã  lâ€™Ã©chelle globale. Vous pouvez utiliser le **fond de carte** que vous voulez SAUF celui par dÃ©faut (si vous Ãªtes en manque dâ€™inspiration, je vous conseille un des fonds de [Stamen Maps](https://maps.stamen.com/#watercolor/12/37.7706/-122.3782)). Ensuite, en partant du jeu de donnÃ©es [land_matrix_mines](/data/land_matrix/land_matrix_mines.gpkg) quâ€™on a utilisÃ© la derniÃ¨re fois, **affichez la couche de votre choix sur la carte**. Si vous avez besoin de la couche au format GeoJSON vous pouvez lâ€™exporter comme telle depuis QGIS (pour rappel, on travaille en WGS84, il serait avisÃ© dâ€™exporter la couche dans ce systÃ¨me de projection). Enfin, si vous avez le temps, ajoutez **un titre** Ã  votre carte.

Vous pouvez utiliser tous les outils Ã  votre disposition sans restriction. Ã‡a peut inclure les cours que je vous ai dÃ©jÃ  faits, dâ€™autres cours, de la documentation, des forums, des sites, des vidÃ©os, des chatbotsâ€¦ comme on dit, tous les moyens sont bons pour coderÂ !

**Pendant que vous effectuez cet exercice,** prenez des notes (mÃªmes trÃ¨s simples) sur ce que vous faites pour pouvoir retracer les Ã©tapes de votre dÃ©veloppement. **Il se peut que je vous demande ces notes en fin de sÃ©ance, donc faites-le avec sÃ©rieuxÂ !**

VoilÃ  un exemple de notes attendues (je vous lâ€™ai dit, Ã§a doit rester simple)Â :

> -   Nouveau dossier pour crÃ©er appli
>
> -   Choisi dâ€™utiliser NodeJS pour lâ€™appli *\[ajoutez ici les commandes utilisÃ©es pour crÃ©er le projet si câ€™est le cas\]*
>
> -   Cours Leaflet -\> importer un GeoJSON. Sauvegarde couche `deals` au format GeoJSON depuis QGIS (EPSG:3857).

Vous pouvez y ajouter quelques petits bouts de code ou de fonctions si vous le jugez pertinent. Jâ€™aimerais aussi y trouver les **liens des ressources qui vous ont Ã©tÃ© utiles** ou vos **prompts** si vous utilisez une IA (avec le nom de lâ€™IA, Ã©videmment). Si câ€™est un autre Ã©tudiant qui vous a donnÃ© un coup de main, indiquez-le moi aussi (ex: "Aide reÃ§ue pour niveau de zoom carte", vous voyez lâ€™idÃ©e).

::: callout-note
Je rappelle que cet exercice nâ€™est pas notÃ©. Recevoir de lâ€™aide dâ€™un autre Ã©tudiant ou de ma part nâ€™est pas pÃ©nalisÃ©. Utiliser Chat-GPT nâ€™est pas pÃ©nalisÃ©. **Vous avez droit Ã  toutes les ressources disponibles, jâ€™ai juste besoin de savoir lesquelles vous avez utilisÃ©.**

Câ€™est bien si vous essayez dâ€™aller le plus loin possible mais prenez quand-mÃªme votre temps et essayez de procÃ©der par Ã©tapes.

Par contre, si vous ne faites aucun effort pour avancer et pour comprendre ce que vous faites, Ã§a va finir par se voirâ€¦ et il y aura quelques points dâ€™investissement dans mon cours sur la note finale, donc faites quand mÃªme un effort.
:::

::: {.callout-tip collapse="true"}
## Ã€ ouvrir aprÃ¨s avoir fait un premier test (crÃ©ation de carte)

Si vous ne savez vraiment pas par oÃ¹ commencerâ€¦

-   Le premier rÃ©flexe que vous devriez avoir serait dâ€™ouvrir le site officiel dâ€™OpenLayers. Il existe toujours sur ces outils de dÃ©veloppement une section "getting started".

-   OpenLayers ressemble beaucoup Ã  Leaflet. Vraiment, vraiment beaucoup.

-   Nâ€™oubliez pas dâ€™utiliser `F12` pour afficher la console de dÃ©veloppement et dâ€™abuser des `console.log()` pour trouver dâ€™oÃ¹ viennent vos erreursÂ !

-   La structure de la page se trouve dans `index.html`. Le style se trouve dans `style.css`. Le code JavaScript se trouve dans `main.js`.

Si ce nâ€™Ã©tait pas vraiment utile pour vous, alors câ€™est que vous Ãªtes dÃ©jÃ  sur la bonne voie.
:::

::: {.callout-tip collapse="true"}
## Ã€ ouvrir aprÃ¨s avoir fait un premier test (GeoJSON)

LÃ , câ€™est un peu plus technique alors je vous donne une astuceÂ :

-   DÃ©jÃ , utilisez du GeoJSON si vous ne savez pas par oÃ¹ prendre le problÃ¨me. Câ€™est votre meilleure porte dâ€™entrÃ©e. Vous pouvez exporter la couche de votre choix en GeoJSON depuis QGIS.

-   OpenLayers utilise les fonctions `ol/layer/Vector` pour crÃ©er des couches au format vectoriel. Câ€™est ce quâ€™il faut utiliser avec du GeoJSON.

-   Toujours si vous travaillez avec du GeoJSON, vous devriez regarder du cÃ´tÃ© de `ol/format/GeoJSON`.
:::

### Fin de session

Quand tout le monde a terminÃ© (peu probable) ou quâ€™on a dÃ©jÃ  passÃ© beaucoup de temps sur la question (trÃ¨s probable), on va prendre le temps de **comparer nos rÃ©sultats et les mÃ©thodes qui ont le mieux fonctionnÃ© pour afficher la carte attendue**. Lâ€™idÃ©e est dâ€™avoir un Ã©change pendant quelques minutes, prÃ©parez-vous donc Ã  parler des points suivantsÂ :

-   Par quoi est-ce que jâ€™ai commencÃ©, quel a Ã©tÃ© mon premier rÃ©flexeÂ ? Si câ€™est une recherche Google, quâ€™est-ce que jâ€™ai tapÃ© en premierÂ ? Si câ€™est Chat-GPT, quel a Ã©tÃ© mon premier promptÂ ?

-   Comment est-ce que je me suis organisÃ©â‹…e, est-ce que jâ€™ai dÃ©coupÃ© lâ€™exercice en Ã©tapesÂ ? Est-ce que jâ€™ai rÃ©ussi Ã  tout faire dâ€™un blocÂ ?

<!-- -->

-   Quelle ressource / site / outil mâ€™a le plus aidÃ©Â ?

-   Est-ce que jâ€™ai pensÃ© Ã  consulter la documentation officielle dâ€™OpenLayersÂ ? Est-ce que jâ€™ai rÃ©ussi Ã  mâ€™en servirÂ ?

-   Si jâ€™ai utilisÃ© lâ€™IA, comment est-ce que jâ€™ai raffinÃ© mes promptsÂ ? Est-ce que je lui ai demandÃ© de gÃ©nÃ©rer du codeÂ ? De me donner des explicationsÂ ?

-   HTML, CSS, JavaScriptâ€¦ est-ce que je comprends la diffÃ©renceÂ ? Est-ce que je sais oÃ¹ trouver le code de mon application, oÃ¹ aller pour ajouter une couche, oÃ¹ aller pour ajouter un titre sur ma carteÂ ?

-   Est-ce que je comprends les notions de "source" et de "layer" dâ€™OpenLayers, ou bien est-ce que câ€™est encore trop flou mÃªme aprÃ¨s cet exerciceÂ ?

**Pendant la discussion, Ã  la suite de vos notes, ajoutez les pistes que vous envisagez pour vous dÃ©bloquer / pour amÃ©liorer votre carte.**

Il se peut que je vous demande de **partager votre Ã©cran** pour montrer lâ€™Ã©tat actuel de votre carte et votre code et en parler un peu, si la discussion sâ€™y prÃªte.

*Si jamais vous vous Ãªtes laissÃ©s distraire, ce serait le bon moment pour fermer tous les onglets qui nâ€™ont pas de rapport avec mon cours ğŸ‘€*
